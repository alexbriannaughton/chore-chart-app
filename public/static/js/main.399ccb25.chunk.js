(this["webpackJsonpreact-rails-api-project-template-client"]=this["webpackJsonpreact-rails-api-project-template-client"]||[]).push([[0],{28:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(23),s=n.n(a),i=(n(28),n(4)),u=n(3),o=n(7),j=n(1);var l=function(e){var t=e.user,n=e.setUser;function c(){t&&fetch("/logout",{method:"DELETE"}).then((function(e){e.ok&&n(null)}))}return Object(j.jsx)("nav",{id:"navbar",children:t?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(o.c,{className:"nav-buttons",to:"create-new-chart",children:Object(j.jsx)("span",{children:"Create New Chart"})}),Object(j.jsx)(o.c,{className:"nav-buttons",to:"your-charts",children:Object(j.jsx)("span",{children:"Your Charts"})}),Object(j.jsx)(o.c,{className:"nav-buttons",exact:!0,to:"/",onClick:c,children:Object(j.jsx)("span",{children:"Logout"})})]}):Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(o.c,{className:"nav-buttons",to:"/",children:Object(j.jsx)("span",{children:"Login"})})})})};var b=function(e){var t=e.setUser,n=Object(u.l)(),r=Object(c.useState)(""),a=Object(i.a)(r,2),s=a[0],o=a[1],l=Object(c.useState)(""),b=Object(i.a)(l,2),d=b[0],h=b[1],O=Object(c.useState)([]),f=Object(i.a)(O,2),x=f[0],m=f[1],p=Object(c.useState)(!1),v=Object(i.a)(p,2),y=v[0],g=v[1];return Object(j.jsx)("div",{children:Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),g(!0),fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s,password:d})}).then((function(e){g(!1),e.ok?(e.json().then((function(e){return t(e)})),n("/")):e.json().then((function(e){return m(e.errors)}))}))},children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{children:"Username:"}),Object(j.jsx)("input",{type:"text",value:s,onChange:function(e){return o(e.target.value)}})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{children:"Password:"}),Object(j.jsx)("input",{type:"password",value:d,onChange:function(e){return h(e.target.value)}})]}),Object(j.jsx)("button",{type:"submit",children:y?"Loading...":"Login"}),x.map((function(e){return Object(j.jsx)("p",{children:e},e)}))]})})};var d=function(e){var t=e.setUser,n=Object(u.l)(),r=Object(c.useState)(""),a=Object(i.a)(r,2),s=a[0],o=a[1],l=Object(c.useState)(""),b=Object(i.a)(l,2),d=b[0],h=b[1],O=Object(c.useState)(""),f=Object(i.a)(O,2),x=f[0],m=f[1],p=Object(c.useState)([]),v=Object(i.a)(p,2),y=v[0],g=v[1],S=Object(c.useState)(!1),k=Object(i.a)(S,2),C=k[0],w=k[1];return Object(j.jsx)("div",{children:Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),w(!0),g([]),fetch("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s,password:d,password_confirmation:x})}).then((function(e){w(!1),e.ok?(e.json().then((function(e){return t(e)})),n("/")):e.json().then((function(e){return g(e.errors)}))}))},children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{children:"Username:"}),Object(j.jsx)("input",{type:"text",value:s,onChange:function(e){return o(e.target.value)}})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{children:"Password:"}),Object(j.jsx)("input",{type:"password",value:d,onChange:function(e){return h(e.target.value)}})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{children:"Password confirmation:"}),Object(j.jsx)("input",{type:"password",value:x,onChange:function(e){return m(e.target.value)}})]}),Object(j.jsx)("button",{type:"submit",children:C?"Loading":"Sign Up!"}),y.map((function(e){return Object(j.jsx)("p",{children:e},e)}))]})})};var h=function(e){var t=e.setUser,n=e.user,r=Object(c.useState)(!0),a=Object(i.a)(r,2),s=a[0],u=a[1];return Object(j.jsx)(j.Fragment,{children:n?Object(j.jsx)("div",{children:Object(j.jsxs)("h1",{children:["Welcome, ",n.username,"!"]})}):Object(j.jsx)(j.Fragment,{children:s?Object(j.jsxs)("div",{children:[Object(j.jsx)(b,{setUser:t}),Object(j.jsxs)("div",{children:[Object(j.jsx)("p",{children:"don't have an account?"}),Object(j.jsx)("button",{onClick:function(e){return u(!1)},children:"sign up!"})]})]}):Object(j.jsx)("div",{children:Object(j.jsxs)("div",{children:[Object(j.jsx)(d,{setUser:t}),Object(j.jsx)("p",{children:"already have an account?"}),Object(j.jsx)("button",{onClick:function(e){return u(!0)},children:"log in!"})]})})})})},O=n(5),f=n(6),x=n(8);var m=function(e){var t=e.user,n=Object(u.l)(),r=Object(c.useState)([]),a=Object(i.a)(r,2),s=a[0],o=(a[1],Object(c.useState)(!1)),l=Object(i.a)(o,2),b=l[0],d=l[1],h=Object(c.useState)(""),m=Object(i.a)(h,2),p=m[0],v=m[1],y=Object(c.useState)([{nameValue:"",emailValue:""}]),g=Object(i.a)(y,2),S=g[0],k=g[1],C=Object(c.useState)([{value:""}]),w=Object(i.a)(C,2),P=w[0],T=w[1];function _(e){e.preventDefault();var t=e.target.id;k((function(n){var c=n.slice();return c[t].nameValue=e.target.value,c}))}function N(e){e.preventDefault();var t=e.target.id;k((function(n){var c=n.slice();return c[t].emailValue=e.target.value,c}))}function U(e){e.preventDefault();var t=e.target.id;T((function(n){var c=n.slice();return c[t].value=e.target.value,c}))}function F(){return(F=Object(f.a)(Object(O.a)().mark((function e(c){var r,a,s,i,u,o,j,l;return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),d(!0),e.prev=2,S.map((function(e){if(""===e.value)throw["no blank fields may be submitted"]})),P.map((function(e){if(""===e.value)throw["no blank fields may be submitted"]})),e.next=7,fetch("/chore_wheels",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:p,user_id:t.id})});case 7:return r=e.sent,e.next=10,r.json();case 10:if(a=e.sent,r.ok){e.next=13;break}throw a.errors;case 13:return e.next=15,Promise.all(S.map((function(e){return fetch("/members",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.nameValue,email:e.emailValue,chore_wheel_id:a.id})})})));case 15:return s=e.sent,e.next=18,Promise.all(s.map((function(e){return e.json()})));case 18:return i=e.sent,e.next=21,Promise.all(P.map((function(e){return fetch("/tasks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.value,chore_wheel_id:a.id})})})));case 21:return u=e.sent,e.next=24,Promise.all(u.map((function(e){return e.json()})));case 24:return o=e.sent,e.next=27,Promise.all(i.map((function(e,t){return fetch("/member_tasks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({member_id:e.id,task_id:o[t].id,chore_wheel_id:a.id})})})));case 27:return j=e.sent,e.next=30,Promise.all(j.map((function(e){return e.json()})));case 30:l=e.sent,console.log(l),n("/your-charts/".concat(a.id)),e.next=38;break;case 35:e.prev=35,e.t0=e.catch(2),console.log(e.t0);case 38:d(!1);case 39:case"end":return e.stop()}}),e,null,[[2,35]])})))).apply(this,arguments)}return Object(j.jsxs)("div",{id:"form-div",children:[Object(j.jsx)("h1",{children:"create new chart"}),Object(j.jsx)("div",{id:"chart-name",children:Object(j.jsxs)("form",{onSubmit:function(e){return F.apply(this,arguments)},children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{children:"Chart name:"}),Object(j.jsx)("input",{type:"text",value:p,onChange:function(e){return v(e.target.value)}}),Object(j.jsx)("br",{})]}),Object(j.jsxs)("div",{children:[S.map((function(e,t){return Object(j.jsxs)("div",{id:"members-div",children:[Object(j.jsx)("label",{children:"Member name:"}),Object(j.jsx)("input",{onChange:_,value:e.nameValue,id:t,type:e.type,size:"40"}),Object(j.jsx)("label",{children:"& Member email:"}),Object(j.jsx)("input",{onChange:N,value:e.emailValue,id:t,type:e.type,size:"40"}),Object(j.jsx)("button",{type:"button",onClick:function(e){return function(e){var t=S.filter((function(t,n){return n!==e}));k(t)}(t)},children:"x"})]})})),Object(j.jsx)("button",{type:"button",onClick:function(e){k((function(e){return[].concat(Object(x.a)(e),[{nameValue:"",emailValue:""}])}))},children:"Add another member"}),Object(j.jsx)("br",{}),P.map((function(e,t){return Object(j.jsxs)("div",{id:"tasks-div",children:[Object(j.jsx)("label",{children:"Task name:"}),Object(j.jsx)("input",{onChange:U,value:e.value,id:t,type:e.type,size:"40"}),Object(j.jsx)("button",{type:"button",onClick:function(e){return function(e){var t=P.filter((function(t,n){return n!==e}));T(t)}(t)},children:"x"})]})})),Object(j.jsx)("button",{type:"button",onClick:function(e){T((function(e){return[].concat(Object(x.a)(e),[{value:""}])}))},children:"Add another task"}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{})]}),Object(j.jsx)("button",{type:"submit",children:b?"Loading...":"Submit"}),Object(j.jsx)("br",{}),s.map((function(e){return Object(j.jsx)("p",{children:e},e)}))]})})]})};var p=function(e){var t=e.user;return Object(j.jsx)("div",{children:t&&t.chore_wheels.map((function(e){return Object(j.jsx)("div",{children:Object(j.jsx)(o.b,{to:"".concat(e.id),children:e.name},e.id)})}))})},v=n(22);var y=function(e){var t=e.memberTasks,n=e.setMemberTasks,r=Object(c.useState)(!1),a=Object(i.a)(r,2),s=a[0],o=a[1],l=Object(u.n)(),b=t.map((function(e){return{member:e.member.name,task:e.task.name,value:1,color:"#".concat(Math.floor(16777215*Math.random()).toString(16))}}));function d(){return(d=Object(f.a)(Object(O.a)().mark((function e(){return Object(O.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,fetch("/rotate/".concat(l.chartId));case 3:return e.next=5,fetch("/chore_wheels/".concat(l.chartId)).then((function(e){return e.json()})).then((function(e){n(e),o(!1)}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{id:"circle-div",children:[Object(j.jsx)("div",{id:"bottom-circle",children:Object(j.jsx)(v.PieChart,{data:b,style:{height:"500px"},label:function(e){return e.dataEntry.member},labelStyle:function(e){return{fill:"black",fontSize:"5px",fontFamily:"sans-serif"}},radius:42,labelPosition:112})}),Object(j.jsx)("div",{id:"top-circle",children:Object(j.jsx)(v.PieChart,{className:s?"spin":null,data:b,style:{height:"410px"},label:function(e){return e.dataEntry.task},labelStyle:function(e){return{fill:"black",fontSize:"5px",fontFamily:"sans-serif"}}})})]}),Object(j.jsx)("button",{onClick:function(){return d.apply(this,arguments)},children:"rotate tasks"})]})};var g=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(u.n)();return Object(c.useEffect)((function(){fetch("/chore_wheels/".concat(a.chartId)).then((function(e){return e.json()})).then((function(e){return r(e)}))}),[]),Object(j.jsxs)("div",{children:[n&&n.map((function(e){return Object(j.jsx)("div",{children:Object(j.jsxs)("p",{children:[e.member.name,": ",e.task.name]})})})),Object(j.jsx)(y,{memberTasks:n,setMemberTasks:r})]})};var S=function(){var e=Object(c.useState)(null),t=Object(i.a)(e,2),n=t[0],r=t[1];return console.log(n),Object(c.useEffect)((function(){fetch("/me").then((function(e){e.ok&&e.json().then((function(e){return r(e)}))}))}),[]),Object(j.jsxs)("div",{children:[Object(j.jsx)(l,{user:n,setUser:r}),Object(j.jsxs)(u.c,{children:[Object(j.jsx)(u.a,{path:"/",element:Object(j.jsx)(h,{user:n,setUser:r})}),Object(j.jsx)(u.a,{path:"/create-new-chart",element:Object(j.jsx)(m,{user:n})}),Object(j.jsx)(u.a,{path:"/your-charts",element:Object(j.jsx)(p,{user:n})}),Object(j.jsx)(u.a,{path:"/your-charts/:chartId",element:Object(j.jsx)(g,{})})]})]})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,31)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))};s.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(o.a,{children:Object(j.jsx)(S,{})})}),document.getElementById("root")),k()}},[[30,1,2]]]);
//# sourceMappingURL=main.399ccb25.chunk.js.map